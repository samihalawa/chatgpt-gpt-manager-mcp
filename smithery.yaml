version: 1
runtime: container
startCommand:
  type: stdio
  configSchema:
    type: object
    properties:
      headless:
        type: boolean
        default: false
        description: "Run browser in headless mode"
      debugMode:
        type: boolean
        default: false
        description: "Enable debug logging"
      screenshotDir:
        type: string
        default: "./temp"
        description: "Directory to store screenshots"
      maxConcurrentSessions:
        type: integer
        default: 3
        minimum: 1
        maximum: 10
        description: "Maximum number of concurrent browser sessions"
  commandFunction: |-
    (config) => ({ 
      command: 'node', 
      args: ['dist/index.js'], 
      env: { 
        HEADLESS: config.headless?.toString() || 'false',
        DEBUG_MODE: config.debugMode?.toString() || 'false',
        SCREENSHOT_DIR: config.screenshotDir || './temp',
        MAX_CONCURRENT_SESSIONS: config.maxConcurrentSessions?.toString() || '3'
      } 
    })
build:
  dockerfile: "Dockerfile"
  dockerBuildPath: "."
